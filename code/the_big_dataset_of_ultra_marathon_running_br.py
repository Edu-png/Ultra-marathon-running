# -*- coding: utf-8 -*-
"""The big dataset of ultra-marathon running - BR

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1fHvgmpBcgaIPvFgy52zTA4NyHZnNciny

# The big dataset of ultra-marathon running

## RE:0. Justificativa do projeto:

Recentemente, desenvolvi um interesse crescente por ultramaratonas, inspirado pelo desafio físico e mental que essas corridas representam. Após concluir minha primeira prova de 10 km, percebi o quanto eventos de longa distância exigem não apenas preparo físico, mas também um entendimento profundo de diversos fatores, como clima, localização e perfil dos participantes. Esse projeto surgiu como uma oportunidade de explorar esse universo, unindo minha curiosidade sobre ultramaratonas com uma análise detalhada de como diferentes variáveis influenciam o desempenho dos atletas em corridas de 50 km.

Além disso, este projeto é uma extensão prática dos meus estudos em análise de dados e ciência de dados, áreas em que estou me especializando. Através dele, busco aplicar conceitos fundamentais como exploração de dados, visualização e identificação de padrões, utilizando ferramentas e técnicas essenciais para a análise de grandes datasets. Ao combinar meu interesse pessoal com objetivos acadêmicos e profissionais, este projeto se torna uma experiência enriquecedora que conecta aprendizado teórico com aplicações reais e alinhadas aos meus objetivos de carreira.


Inspiração: https://www.youtube.com/watch?v=4sZFkPw87ng&t=4s
Data-set: https://www.kaggle.com/datasets/aiaiaidavid/the-big-dataset-of-ultra-marathon-running/discussion/420633

## 1. Importando as bibliotecas que preciso:
"""

import pandas as pd
import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt
from google.colab import files

"""##2. Carregando o meu data-set:"""

!pip install kaggle -q

files.upload()

!mkdir -p ~/.kaggle

!cp kaggle.json ~/.kaggle

!chmod 600 ~/.kaggle/kaggle.json

!kaggle datasets list

!kaggle datasets download aiaiaidavid/the-big-dataset-of-ultra-marathon-running

!unzip /content/the-big-dataset-of-ultra-marathon-running.zip

run = pd.read_csv('/content/TWO_CENTURIES_OF_UM_RACES.csv')

run.head(10)

run.shape

run.dtypes

"""## 3. Limpando e modificando os dados:"""

run.shape

# Limpando os valores nulos:

run.isna().sum()

run = run.dropna()

# Resentando o index:

run.reset_index(drop = True)

# Consertando os tipos dos dados:

run.dtypes

# Convertendo a coluna de datas para o formato datetime
run['Event dates'] = pd.to_datetime(run['Event dates'], errors='coerce', dayfirst=True)

"""## 4. Modificando o dataset:"""

run

# Criando colunas que podem ser interessantes:

# Idade do atleta:

# ano atual - 'Athlete year of birth'

import datetime
hoje = datetime.date.today().year
run['Idade do atleta'] = hoje - run['Athlete year of birth']

# Criando uma coluna apenas com os países:
run['pais'] = run['Event name'].str.extract(r'\((.*?)\)')

# Criando uma coluna com a estação do ano:

def estacao_do_ano(data):
    dia_mes = (data.month, data.day)
    if (3, 21) <= dia_mes < (6, 21):  # Outono
        return 'Outono'
    elif (6, 21) <= dia_mes < (9, 23):  # Inverno
        return 'Inverno'
    elif (9, 23) <= dia_mes < (12, 21):  # Primavera
        return 'Primavera'
    else:  # Verão
        return 'Verão'

# Aplicando a função e criando uma nova coluna
run['Estação'] = run['Event dates'].apply(estacao_do_ano)

# Retirando algumas colunas que não são interessantes:

# Athlete Club, Athlete year of birth, Athlete age category!

run = run.drop(['Athlete club', 'Athlete year of birth', 'Athlete age category'], axis = 1)

# Mudando idade do atleta para inteiro:
run['Idade do atleta'] = run['Idade do atleta'].astype(int)

# Renomeando as colunas que sobramram para pt-br:

run = run.rename(columns = {'Year of event':'Ano da corrida',
                                          'Event dates':'Data',
                                          'Event name':'Nome do evento',
                                          'Event distance/length':'Distância',
                                          'Event number of finishers':'Número de finalistas',
                                          'Athlete performance':'Tempo do atleta',
                                          'Athlete country':'Pais do atleta',
                                          'Athlete gender':'Genero do atleta',
                                          'Athlete average speed': 'Velocidade média do atleta',
                                          'Athlete ID':'ID do atleta',
                                          'country':'Pais da corrida'
})

run

"""## 5. Definição do problema que iremos analisar:

O objetivo desta análise é explorar diferenças de desempenho em corridas de 50 km no Brasil, considerando variáveis como gênero, faixa etária e sazonalidade (e para tal, vamos fazer esses recortes). Ao investigar esses fatores, buscamos entender padrões relevantes que podem influenciar a performance dos atletas, como diferenças de velocidade média entre homens e mulheres, quais grupos etários têm melhor ou pior desempenho e como as estações do ano podem impactar os resultados.

Essa análise pode ser útil para organizadores de eventos esportivos, treinadores e os próprios atletas, oferecendo insights sobre como características demográficas e condições ambientais podem afetar o desempenho. Também pode ajudar na criação de estratégias personalizadas para treinos ou na organização de eventos em períodos mais favoráveis ao melhor desempenho dos competidores.

Com base nesses objetivos, formulamos questões específicas para responder ao problema e obter conclusões significativas que contribuam para um entendimento mais profundo das dinâmicas em corridas de 50 km no Brasil.

## 6. Realizando o recorte para os dados que precisamos:
"""

# Apenas os 50 km:
run_50 = run[run['Distância'] == '50km']
run_50

# Agora apenas no BR:

run_BRA = run_50[run_50['pais'] == 'BRA']
run_BRA

run_BRA.size

"""run_BRA é portanto, o conjunto que iremos estudar (apenas 50 km realizadas no BR)!

## 7. EDA - Analise expoloratória dos dados
"""

run_BRA.dtypes

run_BRA['Velocidade média do atleta'] = run_BRA['Velocidade média do atleta'].astype(float)

sns.displot(run_BRA[run_BRA['Distância'] == '50km']['Velocidade média do atleta'])

run_BRA['Velocidade média do atleta'].mean()

"""O gráfico mostra a distribuição da velocidade média dos atletas que participaram de corridas de 50 km no Brasil. A média calculada para essas velocidades foi de aproximadamente 8,17 km/h, indicando que a maior parte dos atletas se concentra em um desempenho relativamente moderado para longas distâncias, o que é esperado, dado o caráter extenuante desse tipo de prova. O pico no gráfico ocorre na faixa de 6 a 8 km/h, representando a maior frequência de velocidades médias registradas. Essa concentração sugere que essa faixa é o "ritmo padrão" para a maioria dos competidores.

A cauda do gráfico, que se estende até velocidades mais altas (12 a 18 km/h), indica que alguns atletas apresentam um desempenho excepcional, conseguindo manter velocidades médias mais altas ao longo dos 50 km. Por outro lado, o lado esquerdo do gráfico, com velocidades menores que 6 km/h, mostra uma menor frequência de atletas, que podem estar associados a participantes menos preparados ou que enfrentaram dificuldades durante a prova. Esse padrão reforça que a maior parte dos competidores apresenta velocidades consistentes em torno da média, com alguns destaques tanto acima quanto abaixo desse intervalo.
"""

sns.violinplot(data = run_BRA, x = 'Distância', y = 'Velocidade média do atleta', hue = 'Genero do atleta', split = True, inner = 'quart', linewidth = 1)

"""O gráfico violino apresenta a distribuição das velocidades médias dos atletas que participaram de corridas de 50 km no Brasil, segmentadas por gênero. A distribuição masculina (azul) e feminina (laranja) mostram comportamentos similares, mas com algumas diferenças importantes. A largura do violino indica a densidade dos atletas em cada faixa de velocidade média, enquanto as linhas internas representam os quartis, incluindo a mediana.

Os homens apresentam uma leve tendência a atingir velocidades médias mais altas, conforme evidenciado pela extensão superior do violino azul em comparação ao laranja, que atinge velocidades próximas a 17,5 km/h. No entanto, a maior densidade de ambos os gêneros está concentrada na faixa entre 6 e 10 km/h, sugerindo que esta é a faixa de ritmo mais comum para a maioria dos participantes, independentemente do gênero. A diferença de performance entre os gêneros é visível nas velocidades extremas, onde há uma densidade maior de homens nas velocidades mais altas. Isso pode estar relacionado a diferenças fisiológicas ou à representatividade proporcional dos gêneros na corrida.
"""

sns.lmplot(data = run_BRA, x = 'Idade do atleta', y = 'Velocidade média do atleta', hue = 'Genero do atleta')

"""O gráfico de dispersão com linhas de regressão mostra a relação entre a idade e a velocidade média dos atletas em corridas de 50 km no Brasil, segmentado por gênero. A maior concentração de atletas está entre os 30 e 60 anos, com ambos os gêneros apresentando uma variação significativa na velocidade dentro dessa faixa etária. As linhas de regressão sugerem uma leve tendência de aumento na velocidade média com a idade até certo ponto, estabilizando ou diminuindo levemente em idades mais avançadas. Homens (linha azul) tendem a manter velocidades médias ligeiramente superiores às mulheres (linha laranja) em quase todas as idades, especialmente nas faixas etárias mais altas.

Para atletas acima de 70 anos, observa-se uma diminuição na densidade de participantes, mas com velocidades ainda competitivas para essa faixa etária. Esse comportamento indica que o treinamento e a experiência desempenham um papel importante no desempenho, permitindo que muitos atletas mantenham boas velocidades em idades avançadas. O gráfico reforça que a idade influencia o desempenho em corridas longas, mas de forma não linear, com diferenças consistentes entre os gêneros.

### Qual é a diferença de velocidade média entre homens e mulheres em corridas de 50 km no Brasil?

Avaliaremos a disparidade de desempenho por gênero, utilizando a velocidade média como métrica principal.
"""

run_BRA.dtypes

# Separando os grupos e calculando as médias:

run_BRA.groupby(['Distância', 'Genero do atleta'])['Velocidade média do atleta'].mean()

"""Os dados revelam que, em corridas de 50 km no Brasil, os homens têm uma velocidade média de 8,50 km/h, enquanto as mulheres apresentam uma média de 6,90 km/h, indicando uma diferença de aproximadamente 1,60 km/h. Essa variação pode estar relacionada a fatores fisiológicos, como a capacidade aeróbica e muscular, que geralmente favorecem os homens em esportes de longa distância. Além disso, aspectos como preparação, experiência e proporção de participantes por gênero podem também influenciar esse resultado.

### Quais faixas etárias apresentam o melhor desempenho em corridas de 50 km no Brasil, considerando apenas grupos com pelo menos 20 participações?

Identificaremos as idades com maior velocidade média entre os atletas.
"""

run_BRA.query('Distância == "50km"').groupby('Idade do atleta')['Velocidade média do atleta'].agg(['mean', 'count']).sort_values('mean', ascending = False).query('count > 19')

"""Os dados mostram que atletas na faixa dos 60 a 70 anos têm as maiores velocidades médias em corridas de 50 km no Brasil, com destaque para os 63 anos (9,97 km/h, 54 participações). Isso indica que a experiência desempenha um papel importante no desempenho. Em contraste, atletas mais jovens, como os de 35 anos (6,72 km/h, 21 participações), apresentam velocidades médias mais baixas, sugerindo que a preparação e a estratégia superam a vantagem física em provas de longa distância.

### Quais faixas etárias apresentam o pior desempenho em corridas de 50 km no Brasil, considerando apenas grupos com pelo menos 10 participações?

Analisaremos as idades com menor velocidade média, para entender padrões de baixo desempenho.
"""

run_BRA.query('Distância == "50km"').groupby('Idade do atleta')['Velocidade média do atleta'].agg(['mean', 'count']).sort_values('mean', ascending = True).query('count > 10')

"""Os dados indicam que as maiores velocidades médias em corridas de 50 km no Brasil são alcançadas por atletas mais velhos, com destaque para a idade 77 anos, que apresenta a maior média de 10,15 km/h (18 participações), seguida por 63 anos (9,97 km/h, 54 participações) e 70 anos (9,94 km/h, 21 participações). Isso reforça o papel da experiência no desempenho em corridas longas. Por outro lado, atletas mais jovens, como os de 30 anos (6,36 km/h, 13 participações), têm velocidades médias significativamente mais baixas, indicando que, em provas de resistência, treinamento e estratégia parecem ser mais determinantes do que a juventude.

### Analisar as idades com menor velocidade média, para entender padrões de baixo desempenho.
O desempenho em corridas de 50 km no Brasil é mais lento no verão do que no inverno?
"""

run_BRA.groupby('Estação')['Velocidade média do atleta'].agg(['mean', 'count']).sort_values('mean', ascending = False)

# Agrupando os dados por estação e calculando a média e a contagem
estacao_agg = run_BRA.groupby('Estação')['Velocidade média do atleta'].agg(['mean', 'count']).sort_values('mean', ascending=False)

# Configurando o gráfico
fig, ax1 = plt.subplots(figsize=(8, 6))

# Gráfico de barras para a média de velocidade por estação
ax1.bar(estacao_agg.index, estacao_agg['mean'], color='skyblue', label='Média de Velocidade')
ax1.set_ylabel('Velocidade Média (km/h)')
ax1.set_xlabel('Estação')
ax1.set_title('Velocidade Média por Estação')

# Adicionando os valores acima das barras
for i, v in enumerate(estacao_agg['mean']):
    ax1.text(i, v + 0.1, f'{v:.2f}', ha='center', va='bottom')

# Exibindo o gráfico
plt.tight_layout()
plt.show()

"""O gráfico e a tabela indicam as velocidades médias dos atletas em corridas de 50 km no Brasil, distribuídas por estação do ano. A maior velocidade média ocorre no verão (9,18 km/h, com 1222 participações), seguida pelo outono (8,11 km/h, 498 participações), inverno (7,83 km/h, 382 participações) e, finalmente, pela primavera, que apresenta a menor média (6,47 km/h, 635 participações). A maior quantidade de participações também ocorre no verão, o que pode sugerir que a estação tem características favoráveis para essas provas.

O aumento da velocidade média no verão pode estar relacionado ao clima mais quente, que pode estimular maior esforço físico por parte dos atletas, especialmente em corridas de longa distância, para concluir a prova mais rapidamente e evitar exposição prolongada ao calor. Por outro lado, a primavera, com temperaturas amenas e potencialmente condições mais úmidas, pode favorecer desempenhos mais moderados, justificando a menor velocidade média observada. Esses padrões indicam que a sazonalidade exerce influência no desempenho dos atletas.

### Existe alguma diferença no desempenho entre homens e mulheres em diferentes estações do ano?

Analisaremos se as estações afetam igualmente ambos os gêneros ou se há diferenças.
"""

desempenho_estacao_genero = (
    run_BRA.groupby(['Estação', 'Genero do atleta'])['Velocidade média do atleta']
    .agg(['mean', 'count'])
    .reset_index()
    .sort_values(['Estação', 'Genero do atleta'])
)

# Exibindo os dados agrupados
print(desempenho_estacao_genero)

# Configurando o gráfico
plt.figure(figsize=(10, 6))
sns.barplot(
    data=desempenho_estacao_genero,
    x='Estação',
    y='mean',
    hue='Genero do atleta',
    palette='Set2'
)

# Adicionando título e rótulos
plt.title('Desempenho por Gênero e Estação do Ano', fontsize=14)
plt.ylabel('Velocidade Média (km/h)', fontsize=12)
plt.xlabel('Estação do Ano', fontsize=12)
plt.legend(title='Gênero do Atleta')
plt.tight_layout()

# Exibindo o gráfico
plt.show()

"""O gráfico apresenta o desempenho médio dos atletas em corridas de 50 km no Brasil, analisado por gênero (feminino e masculino) e distribuído por estação do ano. Observa-se que, em todas as estações, os homens (barras laranja) apresentam velocidades médias consistentemente superiores às mulheres (barras verde). Essa diferença pode estar relacionada a fatores fisiológicos, como maior capacidade aeróbica e resistência muscular masculina.

Além disso, a maior velocidade média para ambos os gêneros é registrada no verão, indicando que o calor pode estimular os atletas a manterem ritmos mais rápidos para reduzir o tempo de exposição às condições climáticas adversas. Em contrapartida, a primavera apresenta as menores velocidades médias, o que pode estar associado a condições climáticas menos favoráveis ou outros fatores que afetam o desempenho. Esses padrões mostram que tanto o gênero quanto a sazonalidade têm impacto significativo no desempenho dos atletas.

### Como o número de participantes influencia a velocidade média?

Avaliaremos se eventos com mais participantes têm uma velocidade média maior ou menor, indicando possíveis impactos da competitividade ou condições do evento.
"""

evento_agg = (
    run_BRA.groupby('Nome do evento')['Velocidade média do atleta']
    .agg(['mean', 'count'])
    .reset_index()
    .rename(columns={'mean': 'Velocidade média', 'count': 'Número de participantes'})
)

# Exibindo os dados agregados
print(evento_agg.head())

# Criando um gráfico de dispersão para visualizar a relação
plt.figure(figsize=(10, 6))
sns.scatterplot(
    data=evento_agg,
    x='Número de participantes',
    y='Velocidade média',
    color='blue',
    alpha=0.7
)

# Ajustando o gráfico
plt.title('Relação entre Número de Participantes e Velocidade Média', fontsize=14)
plt.xlabel('Número de Participantes', fontsize=12)
plt.ylabel('Velocidade Média (km/h)', fontsize=12)
plt.grid(True)
plt.tight_layout()

# Exibindo o gráfico
plt.show()

"""O gráfico de dispersão mostra a relação entre o número de participantes por evento e a velocidade média dos atletas em corridas de 50 km. Observa-se que eventos com poucos participantes (< 100) apresentam uma maior variação de velocidades médias, incluindo as mais altas (acima de 11 km/h). Isso pode indicar que eventos menores, com menos atletas, tendem a ter maior competitividade ou condições mais favoráveis que permitem aos participantes manter um ritmo mais elevado.

Por outro lado, eventos com maior número de participantes (> 400) mostram velocidades médias mais concentradas entre 5 e 7 km/h, sugerindo que, à medida que o número de participantes aumenta, a média de velocidade tende a diminuir. Isso pode ser explicado por fatores como aumento da diversidade de habilidades dos atletas ou maior dificuldade de logística e organização em eventos maiores. Essa relação sugere que a competitividade e o perfil dos participantes variam significativamente com o tamanho dos eventos.

### Há diferença no desempenho de atletas de diferentes países em corridas realizadas no Brasil?

Compararemos a velocidade média dos atletas estrangeiros com a dos brasileiros em eventos realizados no Brasil.
"""

# Agrupando os dados por nacionalidade, calculando a média e o número de participantes

# Garantir que a coluna 'Velocidade média do atleta' está no formato numérico
run_50['Velocidade média do atleta'] = pd.to_numeric(run_50['Velocidade média do atleta'], errors='coerce')

# Remover valores nulos após a conversão
run_50 = run_50.dropna(subset=['Velocidade média do atleta'])

# Agrupando os dados por nacionalidade, calculando a média e o número de participantes
desempenho_pais = (
    run_50.groupby('Pais do atleta')['Velocidade média do atleta']
    .agg(['mean', 'count'])
    .reset_index()
    .rename(columns={'mean': 'Velocidade média', 'count': 'Número de participantes'})
)

# Filtrando países com pelo menos 20 participantes para evitar distorções
desempenho_pais_filtrado = desempenho_pais.query('`Número de participantes` >= 20')

# Exibindo os dados agregados
print(desempenho_pais_filtrado)

# Criando o gráfico
plt.figure(figsize=(12, 6))
sns.barplot(
    data=desempenho_pais_filtrado.sort_values('Velocidade média', ascending=False),
    x='Pais do atleta',
    y='Velocidade média',
    palette='viridis'
)

# Ajustando o gráfico
plt.title('Comparação de Velocidade Média por Nacionalidade', fontsize=14)
plt.ylabel('Velocidade Média (km/h)', fontsize=12)
plt.xlabel('Nacionalidade', fontsize=12)
plt.xticks(rotation=45, fontsize = 5)
plt.tight_layout()

# Exibindo o gráfico
plt.show()

# Adicionando uma cor de destaque para o Brasil
highlight_color = 'red'
default_color = 'gray'

# Criando uma lista de cores: 'red' para Brasil e 'gray' para os demais
colors = [
    highlight_color if pais == 'BRA' else default_color
    for pais in desempenho_pais_filtrado['Pais do atleta']
]

# Criando o gráfico com destaque para o Brasil
plt.figure(figsize=(12, 6))
sns.barplot(
    data=desempenho_pais_filtrado.sort_values('Velocidade média', ascending=False),
    x='Pais do atleta',
    y='Velocidade média',
    palette=colors
)

# Ajustando o gráfico
plt.title('Comparação de Velocidade Média por Nacionalidade', fontsize=14)
plt.ylabel('Velocidade Média (km/h)', fontsize=12)
plt.xlabel('Nacionalidade', fontsize=12)
plt.xticks(rotation=45, fontsize=5)  # Reduzindo o tamanho da fonte
plt.tight_layout()

# Exibindo o gráfico
plt.show()

"""O primeiro gráfico apresenta a comparação da velocidade média dos atletas em corridas de 50 km, por nacionalidade, sem destaque visual. Observa-se que há uma grande variabilidade na velocidade média entre os países, com algumas nacionalidades apresentando um desempenho médio mais elevado. O gráfico também reflete a diversidade de participantes, evidenciada pela presença de muitas nacionalidades, mas dificulta a identificação de países específicos devido à falta de destaque.

O segundo gráfico adiciona uma cor de destaque para o Brasil (em vermelho), facilitando a identificação do desempenho dos atletas brasileiros em relação a outras nacionalidades. Isso permite perceber que, embora o Brasil não esteja entre as nacionalidades com as maiores velocidades médias, ele se encontra em uma posição competitiva intermediária, com uma quantidade significativa de participantes. O destaque ajuda a focar a análise no desempenho nacional, enquanto mantém a perspectiva global de comparação com outros países.

### Como o desempenho dos atletas muda ao longo dos anos?

Verificaremos se há uma tendência de aumento ou diminuição na velocidade média dos atletas ao longo das décadas.
"""

# Agrupando os dados por ano e calculando a velocidade média
desempenho_ano = (
    run_BRA.groupby('Ano da corrida')['Velocidade média do atleta']
    .mean()
    .reset_index()
    .rename(columns={'Velocidade média do atleta': 'Velocidade média'})
)

# Exibindo os dados agregados
print(desempenho_ano)

# Criando o gráfico de linha para observar a tendência ao longo dos anos
plt.figure(figsize=(10, 6))
sns.lineplot(
    data=desempenho_ano,
    x='Ano da corrida',
    y='Velocidade média',
    marker='o',
    color='blue'
)

# Ajustando o gráfico
plt.title('Tendência da Velocidade Média dos Atletas ao Longo dos Anos', fontsize=14)
plt.xlabel('Ano', fontsize=12)
plt.ylabel('Velocidade Média (km/h)', fontsize=12)
plt.grid(True)
plt.tight_layout()

# Exibindo o gráfico
plt.show()

"""O gráfico mostra a tendência da velocidade média dos atletas ao longo dos anos em corridas de 50 km. Inicialmente, é possível observar um declínio gradual no desempenho médio, especialmente entre 2002 e 2012, onde a velocidade média caiu de cerca de 13 km/h para 10 km/h. Essa redução pode ser atribuída a mudanças nas condições dos eventos, maior diversidade de participantes ou outros fatores externos que impactaram o desempenho.

Após 2012, a velocidade média apresenta uma oscilação mais evidente, com períodos de recuperação e declínio até 2020. É importante destacar o ponto mais baixo, registrado em torno de 2018, com uma velocidade média próxima a 5 km/h, seguido por uma recuperação significativa nos anos subsequentes. Esse padrão sugere que fatores como a organização dos eventos, condições climáticas ou mudanças na demografia dos participantes podem ter influenciado o desempenho geral. Analisar esses fatores em detalhes poderia oferecer mais insights sobre as variações observadas.

### Quais são os eventos com as maiores velocidades médias globais e quais características eles têm em comum?

Identificaremos padrões entre eventos com alto desempenho, como localização, estação do ano ou características demográficas dos atletas.
"""

run_BRA.dtypes

# Agrupando os dados por evento, calculando a velocidade média e o número de participantes
eventos_agg = (
    run_50.groupby(['Nome do evento', 'pais', 'Estação'])['Velocidade média do atleta']
    .agg(['mean', 'count'])
    .reset_index()
    .rename(columns={'mean': 'Velocidade média', 'count': 'Número de participantes'})
)

# Ordenando os eventos pelas maiores velocidades médias
eventos_top = eventos_agg.sort_values('Velocidade média', ascending=False).head(10)

# Exibindo os 10 eventos com maior velocidade média
print(eventos_top)

# Criando um gráfico para visualizar os eventos com maior velocidade média
plt.figure(figsize=(12, 6))
sns.barplot(
    data=eventos_top,
    x='Nome do evento',
    y='Velocidade média',
    hue='Estação',
    palette='viridis'
)

# Ajustando o gráfico
plt.title('Top 10 Eventos com Maior Velocidade Média', fontsize=14)
plt.ylabel('Velocidade Média (km/h)', fontsize=12)
plt.xlabel('Evento', fontsize=12)
plt.xticks(rotation=45, fontsize=10)
plt.legend(title='Estação')
plt.tight_layout()

# Exibindo o gráfico
plt.show()

"""
O gráfico mostra os 10 eventos com as maiores velocidades médias em corridas de 50 km, destacando características em comum. A maioria dos eventos ocorre nos Estados Unidos, com algumas exceções em países como Itália, Reino Unido e Alemanha, que também possuem tradição em corridas de longa distância. Além disso, a realização de muitos desses eventos no inverno e na primavera, estações com temperaturas mais amenas, parece favorecer o desempenho dos atletas em provas de resistência.

Outro ponto em comum é que vários desses eventos, como o Michigan Grand Slam e o National AAU 50 Km Championship, são reconhecidos por sua organização e competitividade, atraindo atletas de elite. Essas condições, somadas a uma infraestrutura favorável e rotas bem planejadas, contribuem para os altos desempenhos registrados, servindo como referência para o planejamento de competições futuras."""